<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Luy·ªán ƒê·ªçc Ti·∫øng Vi·ªát</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f0f8ff;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #2E8B57;
            font-size: 2em;
            text-transform: uppercase;
        }

        .image-container {
            position: relative;
            overflow: hidden;
            width: 100%;
            height: 400px;
            margin-bottom: 20px;
        }

        .slide-wrapper {
            display: flex;
            transition: transform 0.5s ease-in-out;
            height: 100%;
        }

        .classroom-img {
            width: 100%;
            height: 400px;
            object-fit: cover;
            flex-shrink: 0;
            border-radius: 15px;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .classroom-img:hover {
            transform: scale(1.02);
        }

        .text-control-container {
            margin: 30px 0;
            padding: 0 15px;
        }

        .viet-text {
            font-size: 1.5em;
            color: #333;
            line-height: 1.6;
            padding: 15px;
            background: rgba(255,255,255,0.9);
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-top: 20px;
            display: none;
        }

        .viet-text.visible {
            display: block;
        }

        .bubble-container {
            display: flex;
            gap: 10px;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }

        .bubble-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9em;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .speaker-btn {
            background: #FFD700;
            color: #333;
        }

        .record-btn {
            background: #FF6B6B;
            color: white;
        }

        .play-btn {
            background: #4ECDC4;
            color: white;
        }

        .page-control {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .page-btn {
            padding: 8px 20px;
            border: none;
            border-radius: 20px;
            background: #2E8B57;
            color: white;
            cursor: pointer;
            transition: opacity 0.3s;
        }

        .page-btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
        }

        #audio-player {
            width: 100%;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>L·ªöP H·ªåC C·ª¶A CH√öNG T√îI</h1>
    </div>

    <div class="main-content">
        <div class="image-container">
            <div class="slide-wrapper"></div>
        </div>

        <div class="text-control-container">
            <div class="bubble-container">
                <button class="bubble-btn speaker-btn" onclick="playOriginal()">
                    üîà
                </button>
                <button class="bubble-btn record-btn" onclick="toggleRecording()">
                    üé§
                </button>
                <button class="bubble-btn play-btn" onclick="playRecordedAudio()">
                    ‚ñ∂
                </button>
            </div>
            <div id="current-text" class="viet-text"></div>
            <audio id="audio-player" controls></audio>
        </div>

        <div class="page-control">
            <button class="page-btn" onclick="changePage(-1)" disabled id="prev-btn">
                ‚óÄ Tr∆∞·ªõc
            </button>
            <span id="page-indicator">Trang 1/11</span>
            <button class="page-btn" onclick="changePage(1)" id="next-btn">
                Sau ‚ñ∂
            </button>
        </div>
    </div>

    <script>
        // È°µÈù¢Êï∞ÊçÆ
        const pages = [
            { img: '1.png', text: 'ƒê√¢y l√† l·ªõp h·ªçc c·ªßa ch√∫ng t√¥i.Trong l·ªõp h·ªçc c√≥ r·∫•t nhi·ªÅu ƒë·ªì' },
            { img: '2.png', text: 'Kia l√† ƒë·ªìng h·ªì, n√≥ gi√∫p ch√∫ng t√¥i bi·∫øt gi·ªù' },
            { img: '3.png', text: 'ƒê√¢y l√† c√°i b√†n v√† c√°i gh·∫ø, ch√∫ng t√¥i ng·ªìi h·ªçc ·ªü ƒë√¢y' },
            { img: '4.png', text: 'ƒê√¢y l√† c√°i b√∫t v√† quy·ªÉn v·ªü, ch√∫ng t√¥i d√πng ch√∫ng ƒë·ªÉ vi·∫øt v√† ghi ch√©p ki·∫øn th·ª©c' },
            { img: '5.png', text: 'ƒê√¢y l√† c√°i c·ª≠a l·ªõp, n∆°i ch√∫ng t√¥i ra v√†o l·ªõp' },
            { img: '6.png', text: 'ƒê√¢y l√† c·ª≠a s·ªï, n∆°i √°nh s√°ng r·ªçi v√†o' },
            { img: '7.png', text: 'Kia l√† b·ª•c gi·∫£ng, c√¥ gi√°o th∆∞·ªùng ƒë·ª©ng tr√™n b·ª•c gi·∫£ng gi·∫£ng b√†i' },
            { img: '8.png', text: 'ƒê√¢y l√† m√°y t√≠nh c·ªßa t√¥i, t√¥i d√πng m√°y t√≠nh m·ªói ng√†y' },
            { img: '9.png', text: 'L·ªõp t√¥i c√≤n c√≥ m√°y chi·∫øu' },
            { img: '10.png', text: 'gi√° s√°ch v√† nhi·ªÅu th·ª© kh√°c' },
            { img: '11.png', text: 'L·ªõp ch√∫ng t√¥i kh√¥ng to nh∆∞ng r·∫•t ƒë·∫ßy ƒë·ªß' }
        ];

        let currentPage = 0;
        let isTextVisible = false;
        let mediaRecorder = null;
        let audioChunks = [];
        const audioPlayer = document.getElementById('audio-player');
        const slider = document.querySelector('.slide-wrapper');
        const textElement = document.getElementById('current-text');
        const pageIndicator = document.getElementById('page-indicator');

        // ÂàùÂßãÂåñËΩÆÊí≠
        function initSlider() {
            slider.innerHTML = pages.map(page => 
                `<img src="${page.img}" class="classroom-img" 
                     alt="Illustration" 
                     onclick="toggleTextVisibility()">`
            ).join('');
            updateSliderPosition();
        }

        // ÁøªÈ°µÂäüËÉΩ
        function changePage(direction) {
            currentPage = Math.max(0, Math.min(pages.length - 1, currentPage + direction));
            updateDisplay();
        }

        // Êõ¥Êñ∞ÊòæÁ§∫
        function updateDisplay() {
            textElement.textContent = pages[currentPage].text;
            textElement.classList.remove('visible');
            isTextVisible = false;
            audioPlayer.src = ''; // Ê∏ÖÁ©∫‰∏ä‰∏ÄÈ°µÁöÑÂΩïÈü≥
            updateSliderPosition();
            updatePageIndicator();
            updateButtons();
        }

        // ÂàáÊç¢ÊñáÊú¨ÂèØËßÅÊÄß
        function toggleTextVisibility() {
            isTextVisible = !isTextVisible;
            textElement.classList.toggle('visible', isTextVisible);
        }

        // Êí≠ÊîæÂéüÊñá
        function playOriginal() {
            const synth = window.speechSynthesis;
            const utterance = new SpeechSynthesisUtterance(pages[currentPage].text);
            utterance.lang = 'vi-VN';
            synth.speak(utterance);
        }

        // ÂΩïÈü≥ÂäüËÉΩ
        async function toggleRecording() {
            try {
                if (!mediaRecorder) {
                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                    mediaRecorder = new MediaRecorder(stream);
                    
                    mediaRecorder.ondataavailable = e => {
                        audioChunks.push(e.data);
                    };
                    
                    mediaRecorder.onstop = () => {
                        const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
                        const audioUrl = URL.createObjectURL(audioBlob);
                        audioPlayer.src = audioUrl;
                        audioChunks = [];
                    };
                    
                    mediaRecorder.start();
                    document.querySelector('.record-btn').textContent = '‚èπ';
                    audioPlayer.removeAttribute('src'); // Ê∏ÖÈô§‰πãÂâçÁöÑÂΩïÈü≥
                } else {
                    mediaRecorder.stop();
                    mediaRecorder.stream.getTracks().forEach(track => track.stop());
                    mediaRecorder = null;
                    document.querySelector('.record-btn').textContent = 'üé§';
                }
            } catch (error) {
                console.error('L·ªói microphone:', error);
                alert('Kh√¥ng th·ªÉ truy c·∫≠p microphone! Vui l√≤ng cho ph√©p quy·ªÅn s·ª≠ d·ª•ng microphone.');
            }
        }

        // Êí≠ÊîæÂΩïÈü≥
        function playRecordedAudio() {
            if (!audioPlayer.src) {
                alert('Ch∆∞a c√≥ b·∫£n ghi √¢m! Vui l√≤ng ghi √¢m tr∆∞·ªõc.');
                return;
            }
            audioPlayer.play();
        }

        // ËæÖÂä©ÂáΩÊï∞
        function updateSliderPosition() {
            slider.style.transform = `translateX(-${currentPage * 100}%)`;
        }

        function updatePageIndicator() {
            pageIndicator.textContent = `Trang ${currentPage + 1}/${pages.length}`;
        }

        function updateButtons() {
            document.getElementById('prev-btn').disabled = currentPage === 0;
            document.getElementById('next-btn').disabled = currentPage === pages.length - 1;
        }

        // ÂàùÂßãÂåñ
        initSlider();
        updateDisplay();
    </script>
</body>
</html>